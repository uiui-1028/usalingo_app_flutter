# フラッシュカードシステム仕様書

## 概要
Usalingoアプリの核となるフラッシュカードシステムの仕様を定義します。

## 機能要件

### 基本機能
- **カード表示**: 単語と意味の表示
- **スワイプ操作**: 左右スワイプで正解/不正解判定
- **音声再生**: 単語の発音を再生
- **進捗記録**: 学習結果の記録と管理

### 高度な機能
- **間隔反復**: 忘却曲線に基づく復習スケジューリング
- **難易度調整**: 学習者のレベルに応じた難易度設定
- **統計表示**: 学習進捗の可視化
- **オフライン対応**: インターネット接続なしでの学習

## データ構造

### Word Entity
```dart
class Word {
  final String id;
  final String english;
  final String japanese;
  final String pronunciation;
  final String audioPath;
  final int difficulty;
  final DateTime createdAt;
  final DateTime updatedAt;
}
```

### LearningProgress Entity
```dart
class LearningProgress {
  final String id;
  final String wordId;
  final int correctCount;
  final int incorrectCount;
  final DateTime lastReviewed;
  final DateTime nextReview;
  final double confidence;
}
```

## ユーザーインターフェース

### カードデザイン
- **表面**: 英語単語 + 発音ボタン
- **裏面**: 日本語訳 + 例文（オプション）
- **アニメーション**: スムーズな反転アニメーション
- **テーマ対応**: 複数テーマでの表示

### 操作方式
1. **タップ**: カードの反転
2. **左スワイプ**: 不正解（再度学習）
3. **右スワイプ**: 正解（次の復習間隔を延長）
4. **長押し**: 詳細情報の表示

## 学習アルゴリズム

### 間隔反復システム
```
1回目: 1日後
2回目: 3日後
3回目: 7日後
4回目: 14日後
5回目: 30日後
6回目以降: 60日間隔
```

### 難易度調整
- **正解率**: 80%以上で難易度上昇
- **間違い率**: 50%以下で難易度下降
- **学習頻度**: 頻繁な学習で難易度調整

## パフォーマンス要件

### 応答時間
- **カード表示**: 100ms以内
- **音声再生**: 200ms以内
- **スワイプ判定**: 50ms以内
- **データ保存**: 500ms以内

### メモリ使用量
- **同時表示カード**: 最大10枚
- **音声キャッシュ**: 最大50MB
- **画像キャッシュ**: 最大100MB

## エラーハンドリング

### ネットワークエラー
- オフライン時のローカルデータ使用
- 接続復旧時の自動同期
- ユーザーへの適切な通知

### データエラー
- 破損データの自動修復
- バックアップからの復元
- エラーログの記録

## テスト戦略

### 単体テスト
- カード表示ロジック
- 学習進捗計算
- 間隔反復アルゴリズム

### 統合テスト
- データベース操作
- 音声再生機能
- 同期処理

### UIテスト
- スワイプ操作
- アニメーション
- テーマ切り替え

## 今後の拡張予定

### 短期目標
- [ ] 例文機能の追加
- [ ] 画像付きカード
- [ ] 学習統計の詳細化

### 長期目標
- [ ] AIによる難易度調整
- [ ] 音声認識機能
- [ ] 学習者間の競争機能 