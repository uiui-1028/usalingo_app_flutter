
# Claude ルール - Usalingo英語学習アプリ

## プロジェクト概要
このプロジェクトは英語学習用のフラッシュカードアプリ「Usalingo」です。Flutter、Riverpod、SQLite、Supabaseを使用したクロスプラットフォーム対応の単語学習アプリです。

## 共通ルールの参照
以下の共通ルールを必ず適用してください：
- 作業プロセス（タスク分析、実行、品質管理、最終確認）
- ショートカットエイリアス（/ask, /plan, /debug, /cmt, /log）
- 技術スタック制約
- 重要な注意事項

## 開発ルールと規約

### セキュリティ
- **絶対禁止**: APIキーや秘密鍵をハードコーディングしない
- **絶対禁止**: `lib/secrets.dart`をバージョン管理に含めない
- Supabaseの認証情報は環境変数または設定ファイルで管理する
- ユーザーデータの暗号化を徹底する

### データ管理
- **絶対禁止**: ユーザーの確認なしに学習データを削除する
- 学習進捗データのバックアップを適切に実装する
- SQLiteとSupabaseの同期処理でデータ損失を防ぐ

### アーキテクチャ
- **Clean Architecture**を厳守する
  - `domain/`: エンティティとユースケース
  - `data/`: データソースとリポジトリ実装
  - `presentation/`: UIとウィジェット
- **Riverpod**を使用した状態管理を統一する
- 新機能追加時は既存のフォルダ構造に従う

### コーディング規約
- **Dart公式ガイドライン**に従う
- `flutter_lints`ルールを必ず通す
- ウィジェットは機能ごとに適切に分割する
- 非同期処理は`async/await`パターンを使用

### 開発フロー
```bash
# 開発前チェック
flutter doctor
flutter clean && flutter pub get

# コード品質チェック
flutter analyze
dart format .

# テスト実行
flutter test

# ビルド確認
flutter build apk --debug
flutter build ios --debug
```

### ファイル構成ルール
reserve

### テーマとUIルール
- 複数テーマ対応（Flat, Material, Neumorphism, Mockup）
- レスポンシブデザインを考慮
- アクセシビリティを重視
- Lottieアニメーションは適度に使用

### 単語学習機能
- フラッシュカード機能の実装
- 学習進捗の記録と管理
- 復習スケジューリング機能
- 音声ファイルの適切な管理（assets/audio/）

### デバッグとテスト
- 単体テストを必須とする
- ウィジェットテストを推奨
- デバッグ時は適切なログ出力
- プロダクションビルド前に動作確認

### エラーハンドリング
- ネットワークエラーの適切な処理
- データベースエラーの対応
- ユーザーフレンドリーなエラーメッセージ
- 例外発生時の適切なログ記録

### パフォーマンス
- 大量データ処理時のメモリ管理
- 画像とアニメーションの最適化
- データベースクエリの効率化
- 適切なウィジェット再描画制御

### リリース
- **絶対禁止**: テストなしで本番環境にデプロイする
- リリース前にすべてのプラットフォームでテスト
- アプリストア向けのメタデータ準備
- バージョン管理とリリースノート作成

## 注意事項
このアプリは教育目的で開発されています。ユーザーの学習データとプライバシーを最優先に考慮した開発を心がけてください。 