# 仕様書

status: Run (https://www.notion.so/Run-21cc3d1f59e8807f8f1de6ea75153784?pvs=21)
種類: 開発サポート

## 📋 MVP開発仕様書 for usalingo (Vibe Coding)

### プロジェクト概要

認知コストを最小化し、効率的な単語学習を実現するクロスプラットフォーム単語帳アプリ「usalingo」のMVPを開発します。
この仕様書は、FlutterとDartを用いた実装を前提としています。

---

### MVPのゴール

この開発フェーズの目標は、**高機能なUI/UXやサーバーサイド連携を省略した、コア機能である「スタンドアロンのフラッシュカード学習」を実装すること**です。ユーザーはアプリ内で完結した学習体験ができます。

---

### 主要機能の要件

### 1. フラッシュカード学習画面 ( `flashcard_page.dart` )

メインとなる学習画面を実装してください。UIはシンプルに、以下の要素で構成します。

- **単語表示エリア**: 現在の学習単語 (例: "presence") を表示します。
- **解答表示エリア**: 初期状態では非表示の解答（日本語訳など）を格納するエリアです。
- **例文表示エリア**: 単語が使われている例文を表示します。

### 2. カードインタラクション

ユーザー操作は、タップとスワイプの2種類を実装します。

- **パンチアクション (`interaction-punch`)**:
    - **トリガー**: ユーザーが「解答表示エリア」を1回タップする。
    - **アクション**: 非表示になっていた解答テキスト（日本語訳）が、フェードインしながら表示される。
- **物理追従型カードスワイプ (`interaction-swipe`)**:
    - **アクション**: ユーザーがカード全体を左右にドラッグすると、指の動きに追従してカードが傾きながら移動する。
    - **結果（右スワイプ）**: カードが画面右端の閾値を超えて離されると、「わかった」単語として処理され、次のカードが表示される。
    - **結果（左スワイプ）**: カードが画面左端の閾値を超えて離されると、「わからない」単語として処理され、次のカードが表示される。

### 3. フィードバック

学習体験の質を高めるため、以下のフィードバックを実装してください。

- **触覚フィードバック**: スワイプ操作が完了（わかる/わからないが確定）した瞬間に、デバイスを短く振動させてください。
- **Lottieアニメーション**: スワイプ完了時、カードが画面から消えた後に、中央にシンプルなアニメーション（右ならチェックマーク、左ならバツ印など）を0.5秒ほど表示してください。

---

### 技術スタックと設計

- **言語・フレームワーク**: **Flutter (Dart)**
- **状態管理**: **Riverpod**
- **アーキテクチャ**: **Clean Architecture** に準拠してください。以下のリポジトリ構成を厳守し、コードを適切なディレクトリに配置してください。

CSS

```css
`usalingo/
├── lib/
│   ├── app/              # DI(Riverpod), ルーティング
│   ├── data/
│   │   ├── datasources/  # MVPではローカルのハードコードデータを担当
│   │   ├── models/       # データモデル
│   │   └── repositories/ # データ層の実装
│   ├── domain/
│   │   ├── entities/     # ビジネスオブジェクト (例: Word)
│   │   ├── repositories/ # データ層のインターフェース(抽象)
│   │   └── usecases/     # ビジネスロジック (例: GetNextWord)
│   └── presentation/
│       ├── pages/        # フラッシュカード画面のUIと状態管理
│       └── widgets/      # 共通ウィジェット
├── assets/
│   ├── lottie/           # Lottieアニメーションファイル
│   └── fonts/
└── pubspec.yaml`
```

---

### データ構造とコンテンツ

MVPではデータベースは使用しません。学習用の単語リストは、アプリ内に**ハードコード**してください。

### 1. `Word` エンティティ (`lib/domain/entities/word.dart`)

単語データを表現するクラスを以下のように定義してください。

Dart

```dart
`class Word {
  final int id;
  final String text;      // 英単語
  final String meaning;   // 日本語訳
  final String sentence;  // 例文

  Word({
    required this.id,
    required this.text,
    required this.meaning,
    required this.sentence,
  });
}`
```

### 2. ダミーデータ (`lib/data/datasources/local_word_datasource.dart`)

上記の`Word`クラスを用いた、5〜10個程度のダミー単語リストを作成し、アプリ起動時に読み込めるようにしてください。

---

### アセット

- **Lottieファイル**: フィードバック用のシンプルなLottieファイルを2つランダムに配置してください。アセット内に存在するLottieファイルを使用してください。
- **フォント**: システムデフォルトのフォントを使用してください。カスタムフォントは導入しません。